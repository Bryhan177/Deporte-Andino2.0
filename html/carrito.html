<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carrito</title>
    <link rel="stylesheet" href="../css/carrito.css">
    <link rel="icon" href="../img/balon_2_mujer-removebg-preview.png" type="image/x-icon" sizes="256x256">

</head>

<body>
    <header class="header">
        <!-- Contenido del header aquí -->
    </header>
    <h1>Tu Carrito</h1>
    <main>
        <table class="formcar" id="carrito">
            <thead>
                <tr>
                    <th>Imagen</th>
                    <th>Nombre</th>
                    <th>Precio</th>
                    <th>Eliminar</th>
                </tr>
            </thead>
            <tbody>
                <!-- Los productos se añadirán aquí -->
            </tbody>
        </table>
        <div class="botones">
            <button id="vaciar-carrito">Vaciar Carrito</button>
            <button id="procesar-pago">Procesar Pago</button>
            <div id="total"></div>
            <button><a class="linea" href="./inicio.html">Volver</a></button>
        </div>
    </main>
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const carrito = JSON.parse(localStorage.getItem('carrito')) || [];
        const tbody = document.querySelector('#carrito tbody');
        const vaciarCarritoButton = document.getElementById('vaciar-carrito');

        function actualizarCarrito() {
            tbody.innerHTML = '';
            carrito.forEach((producto, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td><img src="${producto.imagen}" alt="${producto.nombre}" style="width: 100px;"></td>
                    <td>${producto.nombre}</td>
                    <td>${producto.precio}</td>
                    <td><button class="eliminar" data-index="${index}">Eliminar</button></td>
                `;
                tbody.appendChild(row);
            });

            document.querySelectorAll('.eliminar').forEach(button => {
                button.addEventListener('click', () => {
                    const index = button.getAttribute('data-index');
                    carrito.splice(index, 1);
                    localStorage.setItem('carrito', JSON.stringify(carrito));
                    actualizarCarrito();
                });
            });
        }

        actualizarCarrito();

        vaciarCarritoButton.addEventListener('click', () => {
            localStorage.removeItem('carrito');
            actualizarCarrito();
        });
    });
</script>
</body>
</html>
